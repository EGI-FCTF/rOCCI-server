OCCI_NETWORK_MIXINS = "<%= @network.mixins.to_a.collect { |m| m.type_identifier }.join(' ') %>"

NAME = "<%= @network.title %>"
DESCRIPTION = "<%= @network.summary || "VNET created using rOCCI-server on #{::DateTime.now.readable_inspect}." %>"

<% if @network.vlan %>
VN_MAD  = "vxlan"
PHYDEV  = "eth0"
VLAN    = "yes"
VLAN_ID = "<%= @network.vlan.to_i %>"
<% else %>
VN_MAD  = "fw"
VLAN    = "no"
BRIDGE  = "onebr0"
<% end %>

USER_IDENTITY = "<%= @identity[:delegated_user].identity %>"
<% if @identity[:dn_auth] %>
USER_X509_DN  = "<%= @identity[:delegated_user].identity %>"
<% end %>

<% if @network.address %>
  <% network_range = IPAddr.new(@network.address).to_range %>

AR=[
    TYPE = "IP4",
    IP   = "<%= network_range.to_a[1] %>",
    SIZE = "<%= network_range.count - 2 %>"
]

NETWORK_ADDRESS = "<%= IPAddr.new(@network.address).to_s %>"
NETWORK_MASK    = "<%= IPAddr.new('255.255.255.255').mask(@network.address.split('/').last).to_s %>"
<% end %>

<% if @network.gateway %>
GATEWAY = "<%= @network.gateway %>"
<% end %>
